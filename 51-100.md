## [85. Maximal Rectangle - Hard](https://leetcode.com/problems/maximal-rectangle/)

```python
class Solution:
  def maximalRectangle(self, matrix: List[List[str]]) -> int:
    if not matrix or not matrix[0]:
      return 0
    ROW, COL = len(matrix), len(matrix[0])
    left_boundary, right_boundary = [0] * COL, [COL-1] * COL
    height = [0] * COL
    ans = 0
    for row in range(ROW):
      cur_left = 0  # the left most boundary for current col
      # scan from left to right
      for col in range(COL):
        if matrix[row][col] == '1':
          height[col] += 1
          left_boudary = max(cur_left, left_boundary[col])
        else:
          height[col] = 0
          left_boundary[col] = 0
          cur_left = col + 1

      cur_right = COL - 1 # the right most boundary for current col
      # scan from right to left
      for col in range(COL)[::-1]:
        if matrix[row][col] == '1':
          right_boundary[col] = min(cur_right, right_boundary[col])
        else:
          right_boundary[col] = COL - 1
          cur_right = col - 1

        ans = max(ans,
            height[col] * (right_boundary[col] - left_boundary[col] + 1))
    return ans
```